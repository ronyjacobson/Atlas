<!DOCTYPE html>
<html>

  <head>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
      
    </style>

    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7J1zsErb9_7jxNu5KU5kIENFObAQEbl0&sensor=false">
    </script>
	<script src="http://t4t5.github.io/sweetalert/dist/sweetalert.min.js"></script> 

	<link rel="stylesheet" type="text/css" href="http://t4t5.github.io/sweetalert/dist/sweetalert.css">

    <script type="text/javascript">
	
      <!-- Define main parameters -->
      var map;
      var markers = [];
      var favorites = [];
      var removeFromFavorites = [];
      var mapCenter = new google.maps.LatLng(31.0000, 35.0000);
      var infowindow;
      var timespanControlText;



      <!-- Error a custom message to the screen -->
      function error(msg) {
		swal("Error", msg, "warning");
      }

      <!-- Put custom message to the screen -->
      function notify(msg) {
		swal(msg);
      }

      <!-- Add a location marker to the map -->
      <!-- The marker will be places at (lat,lng) -->
      <!-- Hovering over the marker will show name -->
      <!-- The markers icon will be img -->
      <!-- Pressing the marker will show an info screen with the name as -->
      <!-- a title, summery as the content and a link to wikipedia which is wikilink -->
      function addMarker(resultid,lat,lng,name,img,summery,wikilink) {
            // Define the icon of the marker
            var image = img;
            
            // Define the marker and it's properties
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: name,
                icon: image
            });

            // Set favorite button
            var favButton;
            
            var inFavButton = 
                 '<button onclick="toggleFavorites(' + resultid + ', this)" ' +
                 'style="font: 11px Century Gothic; color: transparent; background-color: transparent; border-color: transparent; cursor: default; padding: 0px 0px;">' +
                 '<img src="removefavorite.png"/>' +
                 '</button>'
            var notInFavButton = 
                 '<button onclick="toggleFavorites(' + resultid + ', this)" ' +
                 'style="font: 11px Century Gothic; color: transparent; background-color: transparent; border-color: transparent; cursor: default; padding: 0px 0px;">' +
                 '<img src="addfavorite.png"/>' +
                 '</button>'
            




            // Store marker in memory
            markers.push(marker);
            // Add on click listner to the marker si the info screen will be shown
            google.maps.event.addListener(marker, 'click', function() {

            	// Define the info screen
            	favButton = (isInFavorites(resultid) ? inFavButton : notInFavButton);
            	// Define the content to be shown in the info screen
            	var contentString = '<div id="content">'+
	                 '<div id="siteNotice">'+
	                 '</div>'+
	                 '<h1 id="firstHeading" class="firstHeading">' + name + '</h1>' +
	                 '<div id="bodyContent">'+
	                 '<p>' + summery + '</p>'+
	                 '<p>Wikipedia link: ' + name + ', <a href="' + wikilink +'">'+
	                 wikilink + '</a> '+
	                 '</p>'+ favButton +
	                 '</div>'+
	                 '</div>';

                infowindow = new google.maps.InfoWindow({
                    content: contentString,
                    maxWidth: 450
                })
                infowindow.open(map,marker);
            });
      }



      <!-- Add id to favorites -->
      function isInFavorites(id) {
      		return (!(favorites.indexOf(id) == -1));
      }

      <!-- Add id to favorites -->
      function toggleFavorites(resultid, element) {
            var i = favorites.indexOf(resultid);
            if (i == -1) {
      			  element.querySelector('img').setAttribute("src","removefavorite.png");
                  // This result is not in favorites - ADD
                  favorites.push(resultid);
                  var j= removeFromFavorites.indexOf(resultid);
                  if (j != -1) {
                  	// This result was previously asked to be removed
                  	removeFromFavorites.splice(j, 1);
                  }
                  swal("Added To Favorties!", "This person will be added to your favorites after you sync.", "success");
            } else {
                  // This result is in favorites - REMOVE
                  element.querySelector('img').setAttribute("src","addfavorite.png");
                  favorites.splice(i, 1);
                  removeFromFavorites.push(resultid);
                  swal("Removed From Favorites!", "This person will be removed from your favorites after you sync.", "error");
            }
      }

      <!-- Returns add to favorites array -->
      function getFavorites() {
            return favorites.join();
      }
	 
	 <!-- Returns remove from favorites array -->
      function getRemoveFromFavorites() {
            return removeFromFavorites.join();
      }

      <!-- Set the map for all markers -->
      function setAllMap(map) {
            for (var i = 0; i < markers.length; i++) {
                  markers[i].setMap(map);
            }
      }

      <!-- Clear the map of all markers but keep markers in memory -->
      function clearMarkers() {
            setAllMap(null);
      }


      <!-- Show all markers on the map -->
      function showMarkers() {
            setAllMap(map);
      }


      <!-- Delete the all markers on the map and in memory -->
      function deleteMarkers() {
            clearMarkers();
            markers = [];
      }


      <!-- Delete the all markers on the map and in memory -->
      function updateFavorites(favList) {
            favorites= favList;
            removeFromFavorites= [];
            swal({title: "Sweet!",
            	text: "Your favorites where synced to the database.",
            	imageUrl: "https://30c858d169cf8921149a47e0fc664832bc912237.googledrive.com/host/0B-p0x7WmifiKfnN1VHlOLWhqeFRSenFUaWFEZWZsejU1RWtwTnZYWmMtSEVVVGVxcmdJSFU/example/images/thumbs-up.jpg" });
      }

      <!-- Delete the all markers on the map and in memory -->
      function notFound(favList) {
            favorites= favList;
            removeFromFavorites= [];
            swal({title: "Oh well...", text: "Your query came back empty handed\nTry another?", imageUrl: "http://practicallyinspired.com/images/thumb-noitemsfound.png" });
      }

      

 	<!-- Show statistics of last query -->
	function showStats(msg) {
	  swal({
	  	title: "<small>This is what you got:</small>",   
	  	text: msg,   
	  	html: true });
  	}

      <!-- Define the center button -->
      function CenterControl(controlDiv, map) {
        // Set CSS for the control border
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginLeft = '20px';
        controlUI.style.textAlign = 'center';
        controlUI.title = 'Click to center the map';
        controlDiv.appendChild(controlUI);

        // Set CSS for the control interior
        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Century Gothic';
        controlText.style.fontSize = '10px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '5px';
        controlText.style.paddingRight = '5px';
        controlText.innerHTML = 'Center';
        controlUI.appendChild(controlText);

        // Setup the click event listeners
        google.maps.event.addDomListener(controlUI, 'click', function() {
          map.setZoom(2)
          map.setCenter(mapCenter)
        });
      }

      <!-- Define the clear button -->
      function ClearControl(controlDiv, map) {
        // Set CSS for the control border
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginTop = '15px';
        controlUI.style.marginLeft = '24px';
        controlUI.style.textAlign = 'center';
        controlUI.title = 'Click to clear the map';
        controlDiv.appendChild(controlUI);

        // Set CSS for the control interior
        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Century Gothic';
        controlText.style.fontSize = '10px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '5px';
        controlText.style.paddingRight = '5px';
        controlText.innerHTML = 'Clear';
        controlUI.appendChild(controlText);

        // Setup the click event listeners
        google.maps.event.addDomListener(controlUI, 'click', function() {
          deleteMarkers()
        });
      }


      <!-- Define the timespan -->
      function TimespanControl(controlDiv, map) {
        // Set CSS for the control border
        var controlUI = document.createElement('div');
        // controlUI.style.backgroundColor = '#fff';
        // controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        // controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginLeft = '20px';
        controlUI.style.textAlign = 'center';
        controlUI.title = 'Currnet timespan';
        controlDiv.appendChild(controlUI);

        // Set CSS for the control interior
        timespanControlText = document.createElement('div');
        timespanControlText.style.color = 'rgb(255,255,255)';
        timespanControlText.style.fontFamily = 'Century Gothic';
        timespanControlText.style.fontSize = '40px';
        timespanControlText.style.lineHeight = '38px';
        timespanControlText.style.paddingLeft = '5px';
        timespanControlText.style.paddingRight = '5px';
        timespanControlText.style.paddingBottom = '5px';
        timespanControlText.innerHTML = '1000-1100';
        controlUI.appendChild(timespanControlText);
      }

      <!-- Set timespan to new range -->
      function setTimespan(start,end) {
            timespanControlText.innerHTML = start + '-' + end;
      }

      <!-- The map initilatization function -->
      function initialize() {
	 // Define the map properties
        var mapDiv = document.getElementById('map-canvas');
        var mapOptions = {
          center: mapCenter,
          mapTypeId: google.maps.MapTypeId.SATELLITE,
          zoom: 2,
          streetViewControl: false,
          minZoom: 2,
          maxZoom: 17
        };

        // Create the map
        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

        // Add the center button
        var centerControlDiv = document.createElement('div');
        var centerControl = new CenterControl(centerControlDiv, map);
        centerControlDiv.index = 1;
        map.controls[google.maps.ControlPosition.LEFT].push(centerControlDiv);

        // Add the clear button
        var clearControlDiv = document.createElement('div');
        var clearControl = new ClearControl(clearControlDiv, map);
        clearControlDiv.index = 1;
        map.controls[google.maps.ControlPosition.LEFT].push(clearControlDiv);

        // Add timespan
        var timespanControlDiv = document.createElement('div');
        var timespanControl = new TimespanControl(timespanControlDiv, map);
        timespanControlDiv.index = 1;
        map.controls[google.maps.ControlPosition.BOTTOM].push(timespanControlDiv);
      }

      <!-- Main -->
      // Load the map
      google.maps.event.addDomListener(window, 'load', initialize);



    </script>

  </head>

  <body>
    <div id="map-canvas"/>
  </body>

</html>